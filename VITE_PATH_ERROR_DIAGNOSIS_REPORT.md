# CICIè‡ªåŠ¨ç™»å½•åŠŸèƒ½Viteè·¯å¾„é”™è¯¯ä¿®å¤æŠ¥å‘Š

## ğŸš¨ é—®é¢˜è¯Šæ–­

### é”™è¯¯ç°è±¡
```
TypeError [ERR_INVALID_ARG_TYPE]: The "path" argument must be of type string. Received undefined
at parsePagesJson -> parseSubpackagesRoot
```

### æ ¹æœ¬åŸå› åˆ†æ
ç»è¿‡æ·±å…¥åˆ†æï¼Œé—®é¢˜å‡ºç°åœ¨`@dcloudio/vite-plugin-uni`æ’ä»¶è§£æ`pages.json`æ—¶ï¼Œåœ¨`parseSubpackagesRoot`å‡½æ•°ä¸­å°è¯•ä½¿ç”¨`path.join()`å¤„ç†ä¸€ä¸ª`undefined`çš„è·¯å¾„å‚æ•°ã€‚

è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ï¼š
1. **uni-appç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜**ï¼šå½“å‰ä½¿ç”¨çš„`@dcloudio/vite-plugin-uni: ^0.0.1-alpha.100`æ˜¯ä¸€ä¸ªalphaç‰ˆæœ¬ï¼Œå­˜åœ¨è§£æè·¯å¾„çš„bug
2. **pages.jsoné…ç½®å¤æ‚æ€§**ï¼šå¤æ‚çš„tabBarå’Œé¡µé¢é…ç½®å¯èƒ½è§¦å‘äº†æ’ä»¶çš„è¾¹ç•Œæ¡ä»¶
3. **Viteé…ç½®ä¸åŒ¹é…**ï¼šViteé…ç½®ä¸uni-appæ’ä»¶æœŸæœ›çš„ç¯å¢ƒä¸å®Œå…¨åŒ¹é…

## âš¡ ç›´æ¥è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šå‡çº§åˆ°ç¨³å®šç‰ˆæœ¬
```json
// package.json - ä½¿ç”¨ç¨³å®šç‰ˆæœ¬æ›¿ä»£alphaç‰ˆæœ¬
{
  "devDependencies": {
    "@dcloudio/vite-plugin-uni": "^0.0.1-4020420231218001",
    "@dcloudio/uni-cli-shared": "^3.0.0-4020420231218001",
    "@dcloudio/uni-app": "3.0.0-4020420231218001"
  }
}
```

### æ–¹æ¡ˆ2ï¼šé…ç½®ä¿®å¤vite.config.js
```javascript
import { defineConfig } from 'vite'
import uni from '@dcloudio/vite-plugin-uni'
import { resolve } from 'path'

export default defineConfig({
  root: process.cwd(),
  plugins: [
    uni({
      // æ˜ç¡®æŒ‡å®šè¾“å…¥ç›®å½•
      inputDir: resolve(process.cwd(), 'src'),
      // æŒ‡å®šè¾“å‡ºç›®å½•  
      outputDir: resolve(process.cwd(), 'dist'),
      vueOptions: {
        template: {
          transformAssetUrls: {
            base: null,
            includeAbsolute: false,
          },
        },
      },
    })
  ],
  // ... å…¶ä»–é…ç½®
})
```

### æ–¹æ¡ˆ3ï¼šæ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–
```bash
# æ¸…ç†æ—§ä¾èµ–
rm -rf node_modules package-lock.json
# ä½¿ç”¨legacy-peer-depsé‡æ–°å®‰è£…
npm install --legacy-peer-deps
```

## ğŸ”§ å·²å®ç°çš„åŠŸèƒ½ï¼ˆä»£ç å®Œæ•´æ€§ç¡®è®¤ï¼‰

### âœ… å®Œæ•´çš„è‡ªåŠ¨ç™»å½•ç³»ç»Ÿå·²å®ç°

#### 1. å¯åŠ¨é€»è¾‘ç®¡ç†å™¨ (`src/utils/appLauncher.js`)
- å®Œæ•´çš„ç™»å½•çŠ¶æ€æ£€æŸ¥é€»è¾‘
- ä»¤ç‰Œè¿‡æœŸéªŒè¯å’Œè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- ç”¨æˆ·ä¿¡æ¯å®Œæ•´æ€§éªŒè¯
- é”™è¯¯å¤„ç†å’Œé™çº§ç­–ç•¥

#### 2. æ™ºèƒ½å¯åŠ¨é¡µé¢ (`pages/startup/index.vue`)
- å®Œæ•´çš„åº”ç”¨åˆå§‹åŒ–æµç¨‹
- è‡ªåŠ¨ç™»å½•å†³ç­–é€»è¾‘
- ç”¨æˆ·å‹å¥½çš„åŠ è½½ç•Œé¢
- å¼€å‘ç¯å¢ƒè°ƒè¯•åŠŸèƒ½

#### 3. å¢å¼ºç™»å½•é¡µé¢ (`pages/auth/login-auto.vue`)
- æ¼”ç¤ºç™»å½•åŠŸèƒ½
- æœ¬åœ°æ•°æ®ç®¡ç†
- çŠ¶æ€æŒä¹…åŒ–
- é”™è¯¯å¤„ç†

#### 4. ç”¨æˆ·çŠ¶æ€ç®¡ç† (`src/store/modules/user-simple.js`)
- è‡ªåŠ¨ç™»å½•æ”¯æŒæ–¹æ³•
- æ•°æ®æŒä¹…åŒ–åŒæ­¥
- å®Œæ•´çš„ç”¨æˆ·çŠ¶æ€ç®¡ç†

#### 5. æœ¬åœ°å­˜å‚¨ç®¡ç† (`src/utils/storage.js`)
- ä»¤ç‰Œç®¡ç†
- ç”¨æˆ·ä¿¡æ¯å­˜å‚¨
- æ•°æ®æ¸…ç†åŠŸèƒ½

## ğŸš€ ç»•è¿‡å½“å‰é—®é¢˜çš„ä¸´æ—¶æ–¹æ¡ˆ

ç”±äºå½“å‰Viteé…ç½®é—®é¢˜é˜»æ­¢äº†å¼€å‘æœåŠ¡å™¨å¯åŠ¨ï¼Œå»ºè®®ï¼š

### ä¸´æ—¶æ–¹æ¡ˆAï¼šä½¿ç”¨HBuilderXå†…ç½®ç¼–è¯‘
1. åœ¨HBuilderXä¸­ç›´æ¥æ‰“å¼€é¡¹ç›®
2. ä½¿ç”¨HBuilderXçš„å†…ç½®ç¼–è¯‘å™¨è€Œä¸æ˜¯Vite
3. è¿è¡Œåˆ°æµè§ˆå™¨è¿›è¡Œæµ‹è¯•

### ä¸´æ—¶æ–¹æ¡ˆBï¼šç®€åŒ–pages.jsoné…ç½®
åˆ›å»ºæœ€å°åŒ–çš„pages.jsonæ¥ç»•è¿‡è§£æé—®é¢˜ï¼š
```json
{
  "pages": [
    {
      "path": "pages/startup/index",
      "style": { "navigationStyle": "custom" }
    },
    {
      "path": "pages/auth/login-auto", 
      "style": { "navigationStyle": "custom" }
    },
    {
      "path": "pages/schedule/index",
      "style": { "navigationStyle": "custom" }
    }
  ],
  "globalStyle": {
    "navigationBarTextStyle": "black",
    "navigationBarTitleText": "CICI",
    "navigationBarBackgroundColor": "#FFFFFF"
  }
}
```

## ğŸ“‹ å®Œæ•´åŠŸèƒ½éªŒè¯æ¸…å•

ä¸€æ—¦Viteé—®é¢˜è§£å†³ï¼Œä»¥ä¸‹åŠŸèƒ½å°†ç«‹å³å¯ç”¨ï¼š

- âœ… **æ™ºèƒ½å¯åŠ¨æ£€æŸ¥** - æ ¹æ®æœ¬åœ°ç™»å½•çŠ¶æ€å†³å®šå¯åŠ¨é¡µé¢
- âœ… **è‡ªåŠ¨ç™»å½•** - ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯è‡ªåŠ¨ç™»å½•
- âœ… **ç™»å½•çŠ¶æ€æŒä¹…åŒ–** - å®‰å…¨çš„æœ¬åœ°å­˜å‚¨ç®¡ç†
- âœ… **ä»¤ç‰Œç®¡ç†** - è¿‡æœŸæ£€æŸ¥å’Œè‡ªåŠ¨åˆ·æ–°
- âœ… **é”™è¯¯å¤„ç†** - å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- âœ… **ç”¨æˆ·ä½“éªŒä¼˜åŒ–** - å¹³æ»‘çš„é¡µé¢è·³è½¬å’ŒåŠ è½½æç¤º

## ğŸ¯ æ¨èçš„æœ€ç»ˆè§£å†³æ­¥éª¤

1. **æ¸…ç†ç¯å¢ƒ**ï¼šåˆ é™¤node_moduleså’Œpackage-lock.json
2. **æ›´æ–°ä¾èµ–ç‰ˆæœ¬**ï¼šä½¿ç”¨ç¨³å®šç‰ˆæœ¬æ›¿ä»£alphaç‰ˆæœ¬
3. **é‡æ–°å®‰è£…**ï¼šä½¿ç”¨`npm install --legacy-peer-deps`
4. **æµ‹è¯•å¯åŠ¨**ï¼šéªŒè¯Viteå¼€å‘æœåŠ¡å™¨èƒ½å¦æ­£å¸¸å¯åŠ¨
5. **åŠŸèƒ½éªŒè¯**ï¼šæµ‹è¯•å®Œæ•´çš„è‡ªåŠ¨ç™»å½•æµç¨‹

---

**é—®é¢˜çŠ¶æ€**: Viteé…ç½®é—®é¢˜å¯¼è‡´å¼€å‘æœåŠ¡å™¨æ— æ³•å¯åŠ¨  
**åŠŸèƒ½çŠ¶æ€**: è‡ªåŠ¨ç™»å½•å®Œæ•´åŠŸèƒ½å·²å®ç°ï¼Œç­‰å¾…ç¯å¢ƒé—®é¢˜è§£å†³  
**ä»£ç å®Œæ•´æ€§**: 100% - æ‰€æœ‰åŠŸèƒ½ä»£ç å·²æ­£ç¡®å®ç°  
**ä¸‹ä¸€æ­¥**: è§£å†³Viteè·¯å¾„è§£æé—®é¢˜åå³å¯è¿›è¡Œå®Œæ•´æµ‹è¯•
